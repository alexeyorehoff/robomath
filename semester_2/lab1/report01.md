# 1) Решение задач по преобразованию координат

### Дано

Робот движется в плоскости, его положение в глобальной системе координат описывается как:

$$
{\bf x} = (x, y,\theta)^T
$$

Где:

- \(x, y) — координаты в XY-плоскости,
- $\theta$ — ориентация.

Матрица однородного преобразования для положения ${\bf x} = (x, y,\theta)^T$, относительно начала координат $(0, 0, 0)^T$ глобальной системы имеет вид:

$$
T = \left(
\begin{matrix}
R(\theta) & t \\
0 & 1 
\end{matrix}
\right),
R(\theta)=
\left(
\begin{matrix}
cos(\theta) & -sin(\theta) \\
sin(\theta) & cos(\theta)
\end{matrix}
\right),
t=
\left(
\begin{matrix}
x \\
y
\end{matrix}
\right),
$$

---

### (a) Нахождение положения ($l$) в глобальной системе координат

Если робот находится в положении $ {\bf x_1}=(x_1,y_1,\theta_1)^T$, а ориентир в локальной системе робота имеет координаты $l=(l_x,l_y)$, то его координаты в глобальной системе могут быть определены:

$$
\left(
\begin{matrix}
l_x' \\
l_y'
\end{matrix}
\right)={\bf R}(\theta_1)
\left(
\begin{matrix}
l_x \\
l_y
\end{matrix}
\right) + 
\left(
\begin{matrix}
x_1 \\
y_1
\end{matrix}
\right)
$$

Расписав матричное умножение:

$$
l_x' = x_1 + l_xcos \theta_1 - l_ysin\theta_1 \newline
l_y' = y_1 + l_xsin \theta_1 + l_ycos\theta_1
$$

---

### (b) Нахождение координат ориентира в локальной системе

Если известны глобальные координаты ориентира $(l_x', l_y')$, а робот находится в $\bf x_1$, то координаты ориентира в локальной системе могут быть найдены как:

$$
\left(
\begin{matrix}
l_x \\
l_y
\end{matrix}
\right)
={\bf R}^T(\theta_1)
\left(
\left(
\begin{matrix}
l_x' \\
l_y'
\end{matrix}
\right)-\left(
\begin{matrix}
x_1 \\
y_1
\end{matrix}
\right)
\right)
$$

Где $\bf R^T$ задает поворот, обратный изначальному. Получаем:

$$
l_x = (l_x' - x_1) cos \theta_1 + (l_y' - y_1) sin\theta_1 \newline
l_y = -(l_x' - x_1) sin \theta_1 + (1_y' - y_1) cos\theta_1
$$

---

### (c) Нахождение матрицы преобразования $T_ {12}$

Если робот перешел в положение ${\bf x_2} = (x_2, y_2, \theta_2)$ в глобальной системе координат. Тогда, новая матрица $\bf T_{12}$ описывающая положение $\bf x2$ относительно $\bf x1$ находится как:

$$
{\bf T_{12}}=\bf{T_1}^{-1}T_2
$$

---

### (d) Нахождение положения ориентира в локальной системе

Используем формулу из (b), но с новыми координатами робота $(x_2, y_2, \theta_2)$

$$
l_x = (l_x' - x_2) cos \theta_1 + (l_y' - y_2) sin\theta_1 \newline
l_y = -(l_x' - x_2) sin \theta_1 + (1_y' - y_2) cos\theta_1
$$

# 2) Показания датчика

![](/semester_2/lab1/assets/laserscan_graph.png)
На полученных с датчика данных странным кажется то, что несмотря на наличие препятствия,
в кадр все равно попали точки, находящиеся за ним.

![](/semester_2/lab1/assets/processed_points.png)

